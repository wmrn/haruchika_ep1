# haruchika_ep1
ハルチカ第1話のメロディアスな暗号のencode・decode 2016/03/11    

## 説明
そもそもハルチカ見てない人はなんのこっちゃわからんと思うのでどんなものなのか説明します。  
下の写真を見てもらえばそのままなのだが…  
キーボードのアルファベットの部分を横列に音階、縦列に上から「1,2,3」と数字を並べる。  
暗号化したい文字列をローマ字表記にして、これに当てはめていって曲にするみたいな感じです…。  
  
アニメの説明でも出てきていたけれど、これとは別に文字を音符にするシーザー暗号っぽいものがバッハの「フーガの技法」という曲にもある。  
音階をドイツ語読みしたアルファベットを使って「BACH」という文字列を曲の中に入れていたというものだった。  
曲に言葉を残そうとするとどうしても不協和音になりがちで難しいけれど、「BACH」のメロディーはそこまで不協和音になってないから  
さすがバッハ…みたいなことが調べてて出てきてた。(解釈違ってたらすみません。)  
あとは、謎解き中の時に出てきてた50音.verもあったねってことで写真だけ張っておく。  
![](https://github.com/wmrn/haruchika_ep1/blob/master/data/main_code.jpg)
![](https://github.com/wmrn/haruchika_ep1/blob/master/data/Fugue.jpg)
![](https://github.com/wmrn/haruchika_ep1/blob/master/data/50_sound_ver.jpg)

原作まだ読んでないので何とも言えないが…アニメのみからの情報だとルールが欠けていて使えないような気がしたから、  
自分なりにルールを付け足してみた。  

* encode・decodeするときは「♯・♭・♮」はのぞいた状態の音階とする。  
* 一文字に使う音は同時弾きにする(三連符みたいなのはだめ…なるべく。)  
* ローマ字はPCで扱えるならOKとする。(「ち」は「CHI」も「TI」も有りとする。)  
* アルファベットの使用可  
まだいろいろルール不足してるかもだけど…その時はまぁ付け足していく方向で…。  

## 使い方
* encode側  
打ちたい文字を同時押しする。(か→「A」+「K」の同時押し…みたいな感じ。)  
音符と数字と文字の表示＋音階にあった音(sin波なので少し？だいぶ？ぐゎんぐゎんする。)  

* decode側  
  1. 一文字だと思われる区切りの音符の数を選択
  2. 音符をクリックで並べる＋その音符とセットで書かれていた数字を選択
  3. deocdeボタンクリックして文字表示＋音  

※一応下の画像(アニメでハルタが先生に送ってた曲)をencode・decodeしてる様子をとても雑に録画したやつのアドレスも貼り付けておく…。  
![](https://github.com/wmrn/haruchika_ep1/blob/master/data/example.png)  
![](https://github.com/wmrn/haruchika_ep1/blob/master/data/sample_image.png)  
＜encode版＞<https://youtu.be/UqIuxAF67VU>  
＜decode版＞<https://youtu.be/zIGfoJSpN4s>  


## 何で作ったか
作ろうとした切っ掛けは、簡単に言うとこの暗号を使ってみたらとてもめんどくさかったから。  
まず、単純に文字列をローマ字にしてこれに当てはめて曲にするまではいい。  
でも不協和音過ぎてなかなか曲と言いにくい…。しかも、リズムは自分で考えなきゃいけない。  
フラットを付けたりすればどうにかなるレベルなのか…言い回しから変えるべきなのか…考えなきゃいけないことが多すぎた。  
だからせめてメロディーパターンを探れるようなものがあればなぁ…と思って作り始めた。  
結局encode・decodeみたいな形になっちゃったけどまぁいいじゃないか。  


## こだわったところ
##### まず、自分そこまで組める方ではないのでどっちかというとデザイン方面、見た目重視で考えたのでコードがとても雑なのは許していただきたい…。
* encodeの時の音符の向きと数字の位置  
コードが雑になった理由の１つだと信じたい。  
音符の棒の向きには一応ルールがあって「第三線から下向き」ってなってるけれどぶっちゃけメロディーの流れとかでいろいろ例外とかあるらしい？  
(自分一応ピアノやってたけれどだいぶ昔の話だから忘れてる…。)  
例外とかあっていいなら見た目でいいのか？といった感じで自分は「まとまり」重視にしてみた。  
まず、一文字だけの場合はそのままルールに従う。  
二文字以上の場合このルールに従うだけだと、三文字で一文字を表してる感じが欠けているような気がしたリ、  
くっつき過ぎたりいろいろあったのでそこら辺を調節した。  
ルール、なるべくわかるようにコメントアウトしておいた。意外と凝っているのではと思ってます…。(自己満)  

* 背景  
真っ白のままじゃつまらないかなと思ってアイデア出しをだらだらして考えた。地味にアイデアだし楽しかった。  
最初ホームページの感じをそのまま取り入れようかと思ったけれどさすがにそれはあかんと思って円い感じだけパクった。  
自分のイメージではencode・decodeのセット感とかencode・decodeのそれぞれのイメージを重視したつもり。  
色はハルチカのロゴに使われてる4色を使った。  
ちなみにencodeとdecodeの五線譜をそろえると模様がつながるようにした。  
※Server・Clientはしてないので波はつながらない。  

## 最後に
暗号面とか音楽面で少し勉強になったことがあったからよかった。  
これきっかけにencode・decodeほかに作ってみようかと思った…。(おそらく実行は当分あとになる可能性大。)  
このおかげで本嫌いな自分が少し原作読む気になってる。(自分にとっては大成長)  
自分とても面倒なやり方しか思いつかなかったせいでとてつもない感じになってしまったので  
来年度もうちょっとましな組み方出来るように頑張って生きたいと思った。(反省)  
春休み作りたいと思ってたのまぁまぁ消費できたので良かった。  
